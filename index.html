<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Executor Launcher</title>
  <script>
    // 1. Open a blank tab immediately (sync)
    const popup = window.open('about:blank', '_blank');
    if (!popup) {
      console.warn('Popup blocked! Please allow pop-ups for this site.');
    } else {
      // 2. Write your entire executor HTML into that tab
      popup.document.write(`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>HTML Executor</title>
  <style>
    /* … your existing CSS … */
    body { background-color: #2b0000; color: #f0d0d0; font-family: sans-serif; margin:1em }
    /* rest of your styles… */
  </style>
</head>
<body>
  <h1>HTML Executor</h1>
  <div class="controls">
    <!-- your file-upload, textarea, and URL controls here -->
    <label>Upload .html or .txt file:
      <input type="file" id="fileInput" accept=".html,.txt">
    </label>
    <button id="runFileBtn" disabled>Run Uploaded File</button>

    <label>Paste your HTML code here:
      <textarea id="codeInput"></textarea>
    </label>
    <button id="runCodeBtn">Run Code</button>

    <label>Load HTML from URL:
      <input type="text" id="urlInput" placeholder="https://…">
    </label>
    <button id="fetchUrlBtn">Fetch & Run</button>
  </div>

  <script>
    // your existing executor logic here (FileReader, openInNewTab, fetch, etc.)
    function openInNewTab(htmlContent) {
      const blob = new Blob([htmlContent], { type: 'text/html' });
      const url  = URL.createObjectURL(blob);
      window.open(url, '_blank');
      setTimeout(() => URL.revokeObjectURL(url), 60000);
    }

    // … all of the rest of your event listeners …
  </script>
</body>
</html>`);
      // 3. Signal that writing is done
      popup.document.close();
    }
  </script>
</head>
<body>
  <!-- nothing needed here, it's just a thin wrapper -->
</body>
</html>
